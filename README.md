# JiMeng Web MCP Server

<div align="center">

[![npm version](https://img.shields.io/npm/v/jimeng-web-mcp.svg)](https://www.npmjs.com/package/jimeng-web-mcp)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.8-blue.svg)](https://www.typescriptlang.org/)
[![MCP Protocol](https://img.shields.io/badge/MCP-1.10-green.svg)](https://modelcontextprotocol.io/)

åŸºäºTypeScriptçš„Model Context Protocol (MCP) æœåŠ¡å™¨ï¼Œç›´æ¥è®¿é—®å³æ¢¦AI Webç«¯

**ğŸš€ ç›´æ¥è®¿é—®Webç«¯ | æ¯æ—¥å…è´¹ç§¯åˆ† | æœ€æ–°åŠŸèƒ½æ”¯æŒ | ç»„åˆæ¨¡å¼æ¶æ„ | 100%ç±»å‹å®‰å…¨**

[English](./README.en.md) | ä¸­æ–‡

</div>

---

## âš ï¸ å…è´£å£°æ˜

**æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œè¯·å‹¿ç”¨äºå•†ä¸šæˆ–å…¶ä»–ç”¨é€”ã€‚**

- æœ¬é¡¹ç›®é€šè¿‡æŠ€æœ¯æ‰‹æ®µè®¿é—®å³æ¢¦AI Webç«¯æ¥å£
- ä½¿ç”¨æœ¬é¡¹ç›®éœ€éµå®ˆå³æ¢¦AIçš„æœåŠ¡æ¡æ¬¾
- å› ä½¿ç”¨æœ¬é¡¹ç›®äº§ç”Ÿçš„ä»»ä½•é—®é¢˜ï¼Œå¼€å‘è€…ä¸æ‰¿æ‹…è´£ä»»
- å»ºè®®ä»…åœ¨å­¦ä¹ ç ”ç©¶åœºæ™¯ä¸‹ä½¿ç”¨ï¼Œä¸è¦æ»¥ç”¨APIæ¥å£

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¨ å›¾åƒç”Ÿæˆ
- **æ™ºèƒ½ç»§ç»­ç”Ÿæˆ** - promptè‡ªåŠ¨è¯†åˆ«æ•°é‡ï¼ˆå¦‚"ç”Ÿæˆ9å¼ å›¾ç‰‡"ï¼‰ï¼Œä¸€æ¬¡è¿”å›å…¨éƒ¨ç»“æœ
- **ç³»åˆ—å›¾ç”Ÿæˆ** - ä¸“ç”¨äºé«˜ç›¸å…³æ€§åœºæ™¯ï¼šæˆ¿é—´ç³»åˆ—ã€æ•…äº‹åˆ†é•œã€äº§å“å¤šè§’åº¦
- **å¤šå‚è€ƒå›¾æ··åˆ** - æ”¯æŒæœ€å¤š4å¼ å‚è€ƒå›¾ï¼Œå¯æ§åˆ¶æ¯å¼ å¼ºåº¦
- **åŒæ­¥/å¼‚æ­¥æ¨¡å¼** - çµæ´»é€‰æ‹©å³æ—¶è¿”å›æˆ–åå°ç”Ÿæˆ

### ğŸ¬ è§†é¢‘ç”Ÿæˆ
- **çº¯æ–‡æœ¬ç”Ÿæˆ** - ä»promptç›´æ¥åˆ›å»ºè§†é¢‘
- **é¦–å°¾å¸§æ§åˆ¶** - ç²¾ç¡®æ§åˆ¶è§†é¢‘èµ·æ­¢ç”»é¢
- **å¤šå¸§åŠ¨ç”»** - 2-10ä¸ªå…³é”®å¸§ï¼Œç³»ç»Ÿè‡ªåŠ¨è¡¥é—´å¹³æ»‘è¿‡æ¸¡
- **ä¸»ä½“èåˆ** - å°†å¤šå¼ å›¾ç‰‡çš„ä¸»ä½“ç»„åˆåˆ°ä¸€ä¸ªåœºæ™¯ï¼ˆä½¿ç”¨`[å›¾0]`è¯­æ³•ï¼‰

### ğŸ’° å…è´¹ç§¯åˆ†ä¼˜åŠ¿
- **æ¯æ—¥å…è´¹ç§¯åˆ†** - æ¯å¤©å¯è·å¾—60-80å…è´¹ç§¯åˆ†ï¼Œæ— éœ€ä»˜è´¹
- **æœ€æ–°åŠŸèƒ½æ”¯æŒ** - ç›´æ¥è®¿é—®Webç«¯ï¼Œç¬¬ä¸€æ—¶é—´ä½“éªŒæ–°åŠŸèƒ½
- **æ— éœ€APIå¯†é’¥** - åªéœ€ç™»å½•è´¦å·è·å–sessionidå³å¯ä½¿ç”¨

### ğŸ—ï¸ ç°ä»£åŒ–æ¶æ„
- **ç»„åˆæ¨¡å¼è®¾è®¡** - 74.6%ä»£ç å‡å°‘ï¼ˆ5,268è¡Œ â†’ 1,335è¡Œï¼‰
- **é›¶å®‰è£…éƒ¨ç½²** - npxè‡ªåŠ¨å®‰è£…ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®
- **TypeScript + Zod** - å®Œæ•´ç±»å‹å®šä¹‰å’Œè¿è¡Œæ—¶éªŒè¯
- **100%å‘åå…¼å®¹** - æ— ç¼å‡çº§ï¼Œç°æœ‰ä»£ç æ— éœ€ä¿®æ”¹

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. è·å–API Token

1. è®¿é—® [å³æ¢¦AIå®˜ç½‘](https://jimeng.jianying.com) å¹¶ç™»å½•
2. æŒ‰ `F12` æ‰“å¼€å¼€å‘è€…å·¥å…·
3. è¿›å…¥ `Application` > `Cookies`
4. å¤åˆ¶ `sessionid` çš„å€¼

### 2. é…ç½®Claude Desktop

ç¼–è¾‘Claude Desktopé…ç½®æ–‡ä»¶ï¼š
- **macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`
- **Windows**: `%APPDATA%\Claude\claude_desktop_config.json`

æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```json
{
  "mcpServers": {
    "jimeng-web-mcp": {
      "command": "npx",
      "args": ["-y", "jimeng-web-mcp"],
      "env": {
        "JIMENG_API_TOKEN": "ä½ çš„sessionid"
      }
    }
  }
}
```

### 3. é‡å¯Claude Desktop

é…ç½®å®Œæˆï¼ç°åœ¨å¯ä»¥åœ¨Claudeä¸­ä½¿ç”¨å³æ¢¦AIç”ŸæˆåŠŸèƒ½ã€‚

---

## ğŸ› ï¸ MCPå·¥å…·åˆ—è¡¨

### å›¾åƒç”Ÿæˆ (2ä¸ªå·¥å…·)

| å·¥å…· | é»˜è®¤æ¨¡å¼ | é€‚ç”¨åœºæ™¯ | è¯´æ˜ |
|------|---------|---------|------|
| `image` | åŒæ­¥ | å•å›¾/æ™ºèƒ½å¤šå›¾ç”Ÿæˆ | promptè‡ªåŠ¨è¯†åˆ«æ•°é‡ï¼Œå¦‚"ç”Ÿæˆ9å¼ å›¾ç‰‡" |
| `image_batch` | å¼‚æ­¥ | é«˜ç›¸å…³æ€§ç³»åˆ—å›¾ | æˆ¿é—´ç³»åˆ—ã€æ•…äº‹åˆ†é•œã€äº§å“å¤šè§’åº¦ |

### è§†é¢‘ç”Ÿæˆ (4ä¸ªå·¥å…·)

| å·¥å…· | é»˜è®¤æ¨¡å¼ | é€‚ç”¨åœºæ™¯ | è¯´æ˜ |
|------|---------|---------|------|
| `video` | å¼‚æ­¥ | çº¯æ–‡æœ¬ç”Ÿæˆè§†é¢‘ | ä»promptç›´æ¥åˆ›å»º |
| `video_frame` | å¼‚æ­¥ | é¦–å°¾å¸§æ§åˆ¶ | æ”¯æŒé¦–å¸§ã€å°¾å¸§æˆ–ä¸¤è€… |
| `video_multi` | å¼‚æ­¥ | å¤šå¸§åŠ¨ç”» | 2-10ä¸ªå…³é”®å¸§ï¼Œç³»ç»Ÿè¡¥é—´ |
| `video_mix` | å¼‚æ­¥ | ä¸»ä½“èåˆ | ç”¨`[å›¾0]`è¯­æ³•å¼•ç”¨å¤šå¼ å›¾ |

### æŸ¥è¯¢ä¸å·¥å…· (3ä¸ªå·¥å…·)

| å·¥å…· | è¯´æ˜ |
|------|------|
| `query` | æŸ¥è¯¢å•ä¸ªä»»åŠ¡çŠ¶æ€å’Œç»“æœ |
| `query_batch` | æ‰¹é‡æŸ¥è¯¢æœ€å¤š10ä¸ªä»»åŠ¡ |
| `ping` | æµ‹è¯•æœåŠ¡å™¨è¿æ¥ |

### åå¤„ç† (1ä¸ªå·¥å…·)

| å·¥å…· | è¯´æ˜ |
|------|------|
| `video_post_process` | å¸§æ’å€¼ã€è¶…åˆ†è¾¨ç‡ã€éŸ³æ•ˆç”Ÿæˆï¼ˆå¼€å‘ä¸­ï¼‰ |

---

## ğŸ“¸ å›¾åƒç”Ÿæˆè¯¦è§£

### `image` - å•å›¾/æ™ºèƒ½å¤šå›¾ç”Ÿæˆ

#### æ ¸å¿ƒç‰¹æ€§
- âœ… **æ™ºèƒ½æ•°é‡è¯†åˆ«** - promptä¸­çš„"ç”ŸæˆNå¼ å›¾ç‰‡"ä¼šè¢«è‡ªåŠ¨è¯†åˆ«
- âœ… **ç»§ç»­ç”Ÿæˆè‡ªåŠ¨è§¦å‘** - å½“N>4æ—¶ï¼Œå®Œæˆå‰4å¼ åè‡ªåŠ¨ç¡®è®¤ç»§ç»­
- âœ… **ä¸€æ¬¡æ€§è¿”å›** - ç­‰å¾…æ‰€æœ‰å›¾ç‰‡å®Œæˆï¼Œç»Ÿä¸€è¿”å›ç»“æœ
- âœ… **å¤šå‚è€ƒå›¾æ”¯æŒ** - æœ€å¤š4å¼ å‚è€ƒå›¾ï¼Œå¯å•ç‹¬æ§åˆ¶å¼ºåº¦

#### å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| `prompt` | string | âœ… | - | å›¾ç‰‡æè¿°ï¼Œå¯åŒ…å«æ•°é‡ï¼ˆå¦‚"ç”Ÿæˆ9å¼ å›¾ç‰‡"ï¼‰ |
| `filePath` | string[] | âŒ | - | å‚è€ƒå›¾è·¯å¾„æ•°ç»„ï¼ˆæœ€å¤š4å¼ ï¼‰ |
| `model` | string | âŒ | jimeng-4.0 | æ¨¡å‹åç§° |
| `aspectRatio` | string | âŒ | auto | å®½é«˜æ¯”ï¼šauto/1:1/16:9/9:16/3:4/4:3/3:2/2:3/21:9 |
| `sample_strength` | number | âŒ | 0.5 | å‚è€ƒå›¾å½±å“å¼ºåº¦ (0-1) |
| `reference_strength` | number[] | âŒ | - | æ¯å¼ å‚è€ƒå›¾ç‹¬ç«‹å¼ºåº¦ |
| `negative_prompt` | string | âŒ | - | è´Ÿé¢æç¤ºè¯ |
| `async` | boolean | âŒ | false | æ˜¯å¦å¼‚æ­¥æ¨¡å¼ |

#### ä½¿ç”¨ç¤ºä¾‹

**ç¤ºä¾‹1: æ™ºèƒ½ç»§ç»­ç”Ÿæˆ**
```typescript
// Claudeä¸­ç›´æ¥è¯´ï¼š
"è¯·ç”¨imageå·¥å…·ç”Ÿæˆ9å¼ ä¸åŒè§’åº¦çš„å¯çˆ±æ©˜çŒ«å›¾ç‰‡"

// å·¥å…·è°ƒç”¨ï¼š
{
  "prompt": "å¸®æˆ‘ç”Ÿæˆ9å¼ å›¾ç‰‡ï¼Œå¯çˆ±çš„æ©˜çŒ«ï¼Œåˆ†åˆ«æ˜¯ï¼šæ­£é¢ã€ä¾§é¢ã€èƒŒé¢ã€ä¿¯è§†ã€ä»°è§†ã€å·¦å§ã€å³ç©ã€å¥”è·‘ã€ç¡è§‰",
  "model": "jimeng-4.0",
  "async": false
}

// ç»“æœï¼šä¸€æ¬¡æ€§è¿”å›9å¼ å›¾ç‰‡URL âœ…
```

**ç¤ºä¾‹2: å¤šå‚è€ƒå›¾æ··åˆ**
```typescript
{
  "prompt": "æ¢µé«˜æ˜Ÿç©ºé£æ ¼çš„åŸå¸‚å¤œæ™¯",
  "filePath": [
    "/path/to/starry-night.jpg",
    "/path/to/city.jpg"
  ],
  "reference_strength": [0.7, 0.3],
  "async": false
}
```

#### ç»§ç»­ç”Ÿæˆæœºåˆ¶è¯´æ˜

**å·¥ä½œåŸç†**ï¼š
1. APIæ ¹æ®promptè¯†åˆ«æ€»æ•°é‡ï¼ˆå¦‚"ç”Ÿæˆ9å¼ " â†’ totalCount=9ï¼‰
2. å…ˆç”Ÿæˆå‰4å¼ å›¾ç‰‡
3. å®Œæˆç¬¬4å¼ æ—¶æš‚åœï¼Œç­‰å¾…ç¡®è®¤
4. ç³»ç»Ÿè‡ªåŠ¨å‘é€`action=2`ç¡®è®¤
5. APIç»§ç»­ç”Ÿæˆå‰©ä½™5å¼ å›¾ç‰‡
6. è¿”å›å…¨éƒ¨9å¼ ç»“æœ

**é‡è¦ç‰¹æ€§**ï¼š
- âœ… **å•æ¬¡ç¡®è®¤**ï¼šåªå‘é€ä¸€æ¬¡ç»§ç»­è¯·æ±‚ï¼Œä¸æ˜¯å¾ªç¯ç”Ÿæˆ
- âœ… **æ™ºèƒ½è¯†åˆ«**ï¼šä»promptè‡ªåŠ¨è§£ææ•°é‡ï¼Œæ— éœ€countå‚æ•°
- âœ… **å®Œæ•´ç­‰å¾…**ï¼šåŒæ­¥æ¨¡å¼ä¼šç­‰å¾…æ‰€æœ‰å›¾ç‰‡å®Œæˆ

---

### `image_batch` - ç³»åˆ—å›¾ç”Ÿæˆ

#### é€‚ç”¨åœºæ™¯

**âœ… æ¨èä½¿ç”¨åœºæ™¯**ï¼š
- åŒä¸€æˆ¿å­çš„ä¸åŒç©ºé—´ï¼ˆå®¢å…ã€å§å®¤ã€å¨æˆ¿ã€ä¹¦æˆ¿ï¼‰
- æ•…äº‹è¿ç»­åˆ†é•œï¼ˆåœºæ™¯1ã€åœºæ™¯2ã€åœºæ™¯3ï¼‰
- ç»˜æœ¬ä¸åŒé¡µé¢ï¼ˆç¬¬1é¡µã€ç¬¬2é¡µã€ç¬¬3é¡µï¼‰
- äº§å“å¤šè§’åº¦å±•ç¤ºï¼ˆæ­£é¢ã€ä¾§é¢ã€èƒŒé¢ã€ç»†èŠ‚ï¼‰

**âŒ ä¸é€‚ç”¨åœºæ™¯**ï¼š
- å®Œå…¨æ— å…³çš„ç‹¬ç«‹å›¾ç‰‡
- å•å¼ å›¾ç‰‡ç”Ÿæˆï¼ˆè¯·ç”¨`image`ï¼‰

#### å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| `prompts` | string[] | âœ… | - | æ¯å¼ å›¾çš„å·®å¼‚æè¿°ï¼ˆ1-15ä¸ªï¼‰ |
| `basePrompt` | string | âŒ | - | æ•´ä½“é€šç”¨æè¿°ï¼Œæ·»åŠ åœ¨æœ€å‰é¢ |
| `filePath` | string[] | âŒ | - | å¯é€‰å‚è€ƒå›¾ï¼ˆå½±å“æ•´ä½“é£æ ¼ï¼‰ |
| `model` | string | âŒ | jimeng-4.0 | æ¨¡å‹åç§° |
| `aspectRatio` | string | âŒ | auto | å®½é«˜æ¯” |
| `sample_strength` | number | âŒ | 0.5 | å‚è€ƒå›¾å¼ºåº¦ |
| `async` | boolean | âŒ | true | æ˜¯å¦å¼‚æ­¥æ¨¡å¼ |

#### ä½¿ç”¨ç¤ºä¾‹

**ç¤ºä¾‹1: æˆ¿é—´ç³»åˆ—**
```typescript
{
  "basePrompt": "ä¸‰å®¤ä¸¤å…ç°ä»£ç®€çº¦é£æ ¼ï¼Œæœ¨åœ°æ¿ï¼Œæš–è‰²è°ƒç…§æ˜ï¼Œç®€çº¦å®¶å…·",
  "prompts": [
    "å®¢å…ï¼Œç°è‰²å¸ƒè‰ºæ²™å‘é çª—ï¼Œè½åœ°çª—æ´’å…¥é˜³å…‰ï¼ŒèŒ¶å‡ ä¸Šæ”¾ç€æ‚å¿—å’Œé¥æ§å™¨",
    "ä¸»å§å®¤ï¼Œç±³è‰²åºŠå“æ•´é½é“ºå±•ï¼Œæœ¨è´¨åºŠå¤´æŸœä¸Šæœ‰å°ç¯ï¼Œå¢™é¢æ·¡è“è‰²ä¹³èƒ¶æ¼†",
    "å¼€æ”¾å¼å¨æˆ¿ï¼Œç™½è‰²æ©±æŸœæ•´é½æ’åˆ—ï¼Œå¤§ç†çŸ³å°é¢ï¼Œä¸­å²›å°ä¸Šæ‘†æ”¾æ°´æœç¯®",
    "ä¹¦æˆ¿ï¼Œæœ¨è´¨ä¹¦æ¶é å¢™æ‘†æ”¾ï¼Œä¹¦æ¡Œä¸Šæœ‰ç¬”è®°æœ¬ç”µè„‘ï¼Œçª—å¤–ç»¿æ¤æ¸…æ™°å¯è§",
    "å„¿ç«¥æˆ¿ï¼Œå½©è‰²ç©å…·æ”¶çº³æŸœï¼Œå°åºŠä¸Šé“ºç€å¡é€šåºŠå“ï¼Œå¢™ä¸Šè´´ç€å„¿ç«¥ç”»"
  ],
  "async": true
}

// æœ€ç»ˆpromptæ ¼å¼ï¼š
// "ä¸‰å®¤ä¸¤å…ç°ä»£ç®€çº¦é£æ ¼ï¼Œæœ¨åœ°æ¿ï¼Œæš–è‰²è°ƒç…§æ˜ï¼Œç®€çº¦å®¶å…· ç¬¬1å¼ ï¼šå®¢å…... ç¬¬2å¼ ï¼šä¸»å§å®¤... ä¸€å…±5å¼ å›¾"
```

**ç¤ºä¾‹2: äº§å“å¤šè§’åº¦**
```typescript
{
  "basePrompt": "è‹¹æœAirPods Pro 2ä»£ï¼Œç™½è‰²é™¶ç“·æè´¨ï¼Œç£¨ç ‚è´¨æ„Ÿï¼Œè‹¹æœlogoæ¸…æ™°",
  "prompts": [
    "æ­£é¢ç‰¹å†™ï¼Œå……ç”µç›’å¼€ç›–çŠ¶æ€ï¼Œè€³æœºåœ¨ç›’å†…ï¼ŒLEDæŒ‡ç¤ºç¯å¯è§",
    "ä¾§é¢45åº¦è§’ï¼Œå±•ç¤ºå……ç”µç›’åšåº¦å’Œåœ†æ¶¦è¾¹ç¼˜ï¼Œè€³æœºæŸ„éƒ¨åˆ†éœ²å‡º",
    "èƒŒé¢è§†è§’ï¼Œå……ç”µå£ç‰¹å†™ï¼Œåºåˆ—å·åŒºåŸŸæ¸…æ™°ï¼Œç£å¸æ¥è§¦ç‚¹å¯è§"
  ],
  "async": false
}
```

**âš ï¸ é”™è¯¯ç¤ºä¾‹**ï¼š
```typescript
// âŒ promptsè¿‡äºç®€çŸ­ï¼Œç¼ºå°‘å·®å¼‚æè¿°
{
  "prompts": ["å®¢å…", "å§å®¤", "å¨æˆ¿"]  // å¤ªç®€å•ï¼
}

// âœ… æ­£ç¡®åšæ³•ï¼šæ¯ä¸ªpromptåº”è¯¥æ˜¯ä¸€å°æ®µè¯
{
  "prompts": [
    "å®¢å…ï¼Œç°è‰²æ²™å‘é çª—ï¼Œé˜³å…‰æ´’å…¥...",
    "å§å®¤ï¼Œç±³è‰²åºŠå“ï¼Œæœ¨è´¨åºŠå¤´æŸœ...",
    "å¨æˆ¿ï¼Œç™½è‰²æ©±æŸœï¼Œå¤§ç†çŸ³å°é¢..."
  ]
}
```

---

## ğŸ¬ è§†é¢‘ç”Ÿæˆè¯¦è§£

### `video` - çº¯æ–‡æœ¬ç”Ÿæˆè§†é¢‘

#### å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| `prompt` | string | âœ… | - | è§†é¢‘æè¿° |
| `model` | string | âŒ | jimeng-video-3.0 | è§†é¢‘æ¨¡å‹ |
| `resolution` | string | âŒ | 720p | åˆ†è¾¨ç‡ï¼š720p/1080p |
| `fps` | number | âŒ | 24 | å¸§ç‡ (12-30) |
| `duration` | number | âŒ | 5000 | æ—¶é•¿ï¼ˆæ¯«ç§’ï¼Œ3000-15000ï¼‰ |
| `videoAspectRatio` | string | âŒ | 16:9 | å®½é«˜æ¯” |
| `async` | boolean | âŒ | true | æ˜¯å¦å¼‚æ­¥ |

#### ä½¿ç”¨ç¤ºä¾‹

```typescript
{
  "prompt": "ä¸€åªå°ç‹—åœ¨è‰åœ°ä¸Šå¥”è·‘ï¼Œé˜³å…‰æ˜åªšï¼Œé•œå¤´è·Ÿéšï¼Œé«˜æ¸…ç”»è´¨",
  "resolution": "1080p",
  "fps": 30,
  "duration": 5000,
  "async": true
}
```

---

### `video_frame` - é¦–å°¾å¸§æ§åˆ¶

#### å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| `prompt` | string | âœ… | - | è§†é¢‘æè¿° |
| `firstFrameImage` | string | âŒ | - | é¦–å¸§å›¾ç‰‡è·¯å¾„ |
| `lastFrameImage` | string | âŒ | - | å°¾å¸§å›¾ç‰‡è·¯å¾„ |
| å…¶ä»–å‚æ•° | - | - | - | åŒ`video` |

#### ä½¿ç”¨ç¤ºä¾‹

```typescript
{
  "prompt": "ä»ç™½å¤©åˆ°å¤œæ™šçš„åŸå¸‚å»¶æ—¶æ‘„å½±",
  "firstFrameImage": "/path/to/day.jpg",
  "lastFrameImage": "/path/to/night.jpg",
  "resolution": "1080p",
  "async": true
}
```

---

### `video_multi` - å¤šå¸§åŠ¨ç”»

#### æ ¸å¿ƒæ¦‚å¿µ

**å…³é”®å¸§è¿‡æ¸¡åŠ¨ç”»**ï¼šæä¾›2-10ä¸ªå…³é”®å¸§å›¾ç‰‡ï¼Œç³»ç»Ÿåœ¨å¸§é—´ç”Ÿæˆå¹³æ»‘è¿‡æ¸¡ã€‚

**âš ï¸ é‡è¦**ï¼šæ¯å¸§çš„`prompt`æè¿°çš„æ˜¯"ä»å½“å‰å¸§åˆ°ä¸‹ä¸€å¸§çš„è¿‡æ¸¡è¿‡ç¨‹"ï¼ŒåŒ…æ‹¬ï¼š
1. **é•œå¤´ç§»åŠ¨**ï¼šæ¨è¿›ã€æ‹‰è¿œã€æ‘‡ç§»ã€è·Ÿéš
2. **ç”»é¢å˜åŒ–**ï¼šä¸»ä½“åŠ¨ä½œã€åœºæ™¯å˜åŒ–ã€å…‰å½±å˜åŒ–
3. **è½¬åœºæ•ˆæœ**ï¼šæ·¡å…¥æ·¡å‡ºã€åˆ‡æ¢æ–¹å¼

**æœ€åä¸€å¸§çš„promptä¸ç”Ÿæ•ˆ**ï¼ˆå› ä¸ºæ²¡æœ‰ä¸‹ä¸€å¸§ï¼‰ï¼Œå¯ä»¥ç•™ç©ºæˆ–éšæ„å¡«å†™ã€‚

#### å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `frames` | Frame[] | âœ… | å…³é”®å¸§æ•°ç»„ï¼ˆ2-10ä¸ªï¼‰ |
| `frames[].idx` | number | âœ… | å¸§åºå·ï¼ˆä»0å¼€å§‹ï¼‰ |
| `frames[].imagePath` | string | âœ… | å¸§å›¾ç‰‡ç»å¯¹è·¯å¾„ |
| `frames[].duration_ms` | number | âœ… | è¿‡æ¸¡æ—¶é•¿ï¼ˆ1000-6000æ¯«ç§’ï¼‰ |
| `frames[].prompt` | string | âœ… | è¿‡æ¸¡è¿‡ç¨‹æè¿° |
| å…¶ä»–å‚æ•° | - | - | åŒ`video` |

#### ä½¿ç”¨ç¤ºä¾‹

```typescript
{
  "frames": [
    {
      "idx": 0,
      "imagePath": "/path/frame0.jpg",
      "duration_ms": 2000,
      "prompt": "é•œå¤´ä»æ­£é¢ç¼“æ…¢æ¨è¿›ï¼ŒçŒ«ä»åå§¿ç«™èµ·ï¼Œå…‰çº¿ä»å·¦ä¾§ç…§å…¥"
    },
    {
      "idx": 1,
      "imagePath": "/path/frame1.jpg",
      "duration_ms": 2000,
      "prompt": "çŒ«å‘å‰è¿ˆæ­¥è¡Œèµ°ï¼Œå°¾å·´è‡ªç„¶æ‘‡æ‘†ï¼ŒèƒŒæ™¯è™šåŒ–æ•ˆæœå¢å¼º"
    },
    {
      "idx": 2,
      "imagePath": "/path/frame2.jpg",
      "duration_ms": 1000,
      "prompt": "ï¼ˆæœ€åä¸€å¸§ï¼Œæ­¤promptä¸ç”Ÿæ•ˆï¼‰"
    }
  ],
  "fps": 24,
  "resolution": "720p",
  "async": true
}

// ç”Ÿæˆæ•ˆæœï¼ˆæ€»æ—¶é•¿5ç§’ï¼‰ï¼š
// 0-2ç§’ï¼šæ˜¾ç¤ºframe0 + æ‰§è¡Œ"ç«™èµ·æ¥"åŠ¨ç”» â†’ æ¸å˜åˆ°frame1
// 2-4ç§’ï¼šæ˜¾ç¤ºframe1 + æ‰§è¡Œ"è¡Œèµ°"åŠ¨ç”» â†’ æ¸å˜åˆ°frame2
// 4-5ç§’ï¼šæ˜¾ç¤ºframe2ä½œä¸ºç»“å°¾ç”»é¢
```

---

### `video_mix` - ä¸»ä½“èåˆ

#### æ ¸å¿ƒç‰¹æ€§

å°†å¤šå¼ å›¾ç‰‡çš„ä¸»ä½“ç»„åˆåˆ°ä¸€ä¸ªåœºæ™¯ä¸­ï¼Œä½¿ç”¨`[å›¾0]`ã€`[å›¾1]`è¯­æ³•å¼•ç”¨ã€‚

#### å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `referenceImages` | string[] | âœ… | å‚è€ƒå›¾è·¯å¾„æ•°ç»„ï¼ˆ2-4å¼ ï¼‰ |
| `prompt` | string | âœ… | å¿…é¡»åŒ…å«`[å›¾N]`å¼•ç”¨ |
| å…¶ä»–å‚æ•° | - | - | åŒ`video` |

#### ä½¿ç”¨ç¤ºä¾‹

**ç¤ºä¾‹1: è§’è‰²æ¢åœºæ™¯**
```typescript
{
  "referenceImages": [
    "/path/cat.jpg",
    "/path/floor.jpg"
  ],
  "prompt": "[å›¾0]ä¸­çš„çŒ«åœ¨[å›¾1]çš„åœ°æ¿ä¸Šå¥”è·‘",
  "async": true
}
```

**ç¤ºä¾‹2: å¤šå…ƒç´ ç»„åˆ**
```typescript
{
  "referenceImages": [
    "/path/person.jpg",
    "/path/car.jpg",
    "/path/beach.jpg"
  ],
  "prompt": "[å›¾0]ä¸­çš„äººååœ¨[å›¾1]çš„è½¦é‡Œï¼ŒèƒŒæ™¯æ˜¯[å›¾2]çš„æµ·æ»©æ—¥è½æ™¯è‰²",
  "resolution": "1080p",
  "async": true
}
```

---

## ğŸ” æŸ¥è¯¢å·¥å…·

### `query` - æŸ¥è¯¢å•ä¸ªä»»åŠ¡

```typescript
{
  "historyId": "4761818115596"
}

// è¿”å›ï¼š
{
  "status": "completed",
  "progress": 100,
  "imageUrls": ["https://...", "https://...", ...]
}
```

### `query_batch` - æ‰¹é‡æŸ¥è¯¢

```typescript
{
  "historyIds": [
    "4761818115596",
    "4761818115597",
    "1e06b3c9-bd41-46dd-8889-70f2c61f66bb"  // è§†é¢‘ID
  ]
}

// è¿”å›ï¼š
{
  "4761818115596": { "status": "completed", "imageUrls": [...] },
  "4761818115597": { "status": "processing", "progress": 45 },
  "1e06b3c9-...": { "status": "completed", "videoUrl": "https://..." }
}
```

---

## ğŸ’» æœ¬åœ°å¼€å‘

### å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨npm
npm install

# æˆ–ä½¿ç”¨yarn
yarn install
```

### å¼€å‘å‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
npm run dev

# ç±»å‹æ£€æŸ¥
npm run type-check

# æ„å»ºé¡¹ç›®
npm run build

# è¿è¡Œæµ‹è¯•
npm test

# æµ‹è¯•è¦†ç›–ç‡
npm run test:coverage

# æµ‹è¯•MCPæœåŠ¡å™¨
npm run test:mcp
```

### å¯åŠ¨æœåŠ¡å™¨

```bash
# MCP stdioæ¨¡å¼
npm start

# HTTP APIæœåŠ¡æ¨¡å¼
npm run start:api
```

---

## ğŸ¤” å¸¸è§é—®é¢˜

### 1. å›¾åƒç”Ÿæˆå¤±è´¥

**æ£€æŸ¥æ¸…å•**ï¼š
- âœ… `JIMENG_API_TOKEN`æ˜¯å¦æ­£ç¡®é…ç½®
- âœ… å³æ¢¦è´¦å·ç§¯åˆ†æ˜¯å¦å……è¶³ï¼ˆ[ç™»å½•æŸ¥çœ‹](https://jimeng.jianying.com)ï¼‰
- âœ… æç¤ºè¯æ˜¯å¦åŒ…å«æ•æ„Ÿå†…å®¹
- âœ… å‚è€ƒå›¾è·¯å¾„æ˜¯å¦æœ‰æ•ˆï¼ˆç½‘ç»œå›¾éœ€å¯å…¬å¼€è®¿é—®ï¼‰

### 2. ç»§ç»­ç”Ÿæˆæœªè§¦å‘

**æ’æŸ¥æ­¥éª¤**ï¼š
- âœ… promptä¸­æ˜¯å¦æ˜ç¡®æŒ‡å®šæ•°é‡ï¼ˆå¦‚"ç”Ÿæˆ9å¼ å›¾ç‰‡"ï¼‰
- âœ… æŸ¥çœ‹APIè¿”å›çš„`totalCount`æ˜¯å¦æ­£ç¡®è¯†åˆ«
- âœ… æ£€æŸ¥æ˜¯å¦åœ¨åŒæ­¥æ¨¡å¼ä¸‹ï¼ˆasync: falseï¼‰
- âœ… æŸ¥çœ‹æ—¥å¿—ä¸­çš„`[æ™ºèƒ½ç»§ç»­ç”Ÿæˆæ£€æµ‹]`ä¿¡æ¯

### 3. æœåŠ¡å™¨æ— æ³•å¯åŠ¨

**è§£å†³æ–¹æ³•**ï¼š
- âœ… ç¡®ä¿Node.jsç‰ˆæœ¬ â‰¥ 16.0
- âœ… é‡æ–°å®‰è£…ä¾èµ–ï¼š`rm -rf node_modules && npm install`
- âœ… æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½®

### 4. è§†é¢‘ç”Ÿæˆè¶…æ—¶

**è°ƒæ•´å»ºè®®**ï¼š
- âœ… ä½¿ç”¨å¼‚æ­¥æ¨¡å¼ï¼ˆasync: trueï¼‰
- âœ… é™ä½åˆ†è¾¨ç‡ï¼ˆ720pä»£æ›¿1080pï¼‰
- âœ… å‡å°‘è§†é¢‘æ—¶é•¿ï¼ˆæ¨è5ç§’ï¼‰
- âœ… ç®€åŒ–promptæè¿°

---

## ğŸ¯ æ”¯æŒçš„æ¨¡å‹

### å›¾ç‰‡æ¨¡å‹

| æ¨¡å‹åç§° | è¯´æ˜ | æ¨èåœºæ™¯ |
|---------|------|---------|
| `jimeng-4.0` | æœ€æ–°ç¬¬å››ä»£æ¨¡å‹ï¼ˆé»˜è®¤ï¼‰ | å…¨åœºæ™¯æ¨è |
| `jimeng-3.0` | ç¬¬ä¸‰ä»£æ¨¡å‹ï¼Œç”»é¢é²œæ˜ | é£æ ¼åŒ–åˆ›ä½œ |
| `jimeng-2.1` | ç¨³å®šç‰ˆæœ¬ | å¸¸è§„ç”Ÿæˆ |
| `jimeng-2.0-pro` | Proç‰ˆæœ¬ | é«˜è´¨é‡éœ€æ±‚ |

### è§†é¢‘æ¨¡å‹

| æ¨¡å‹åç§° | è¯´æ˜ | æ¨èåœºæ™¯ |
|---------|------|---------|
| `jimeng-video-3.0` | ä¸»åŠ›æ¨¡å‹ï¼ˆé»˜è®¤ï¼‰ | å…¨åœºæ™¯æ¨è |
| `jimeng-video-3.0-pro` | Proé«˜è´¨é‡ç‰ˆæœ¬ | ä¸“ä¸šçº§ä½œå“ |
| `jimeng-video-2.0-pro` | å…¼å®¹æ€§å¥½ | å¤šåœºæ™¯é€‚é… |

---

## ğŸ“Š æ¶æ„äº®ç‚¹

### ç»„åˆæ¨¡å¼è®¾è®¡

```typescript
class NewJimengClient {
  private httpClient: HttpClient              // HTTPè¯·æ±‚å’Œè®¤è¯
  private imageUploader: ImageUploader        // å›¾ç‰‡ä¸Šä¼ 
  private creditService: NewCreditService     // ç§¯åˆ†ç®¡ç†
  private videoService: VideoService          // è§†é¢‘ç”Ÿæˆ

  constructor(token?: string) {
    this.httpClient = new HttpClient(token);
    this.imageUploader = new ImageUploader(this.httpClient);
    this.creditService = new NewCreditService(this.httpClient);
    this.videoService = new VideoService(this.httpClient, this.imageUploader);
  }
}
```

### ä»£ç å‡å°‘å¯¹æ¯”

| æŒ‡æ ‡ | é‡æ„å‰ | é‡æ„å | æ”¹è¿› |
|------|-------|-------|------|
| æ€»ä»£ç è¡Œæ•° | 5,268è¡Œ | 1,335è¡Œ | **-74.6%** |
| æ ¸å¿ƒç±»æ•°é‡ | 9ä¸ª | 5ä¸ª | **-44.4%** |
| ç»§æ‰¿å±‚çº§ | 3å±‚ | 0å±‚ | **æ‰å¹³åŒ–** |
| ç±»å‹å®‰å…¨ | éƒ¨åˆ† | å®Œæ•´ | **100%** |

---

## ğŸ“¦ æ‰‹åŠ¨å®‰è£…ï¼ˆå¯é€‰ï¼‰

å¦‚æœä¸ä½¿ç”¨npxæ–¹å¼ï¼Œå¯ä»¥æ‰‹åŠ¨å®‰è£…ï¼š

```bash
# å…¨å±€å®‰è£…
npm install -g jimeng-web-mcp

# æˆ–é¡¹ç›®å†…å®‰è£…
npm install jimeng-web-mcp
```

**Claude Desktopé…ç½®**ï¼š
```json
{
  "mcpServers": {
    "jimeng-web-mcp": {
      "command": "node",
      "args": ["/path/to/jimeng-web-mcp/lib/index.js"],
      "env": {
        "JIMENG_API_TOKEN": "ä½ çš„sessionid"
      }
    }
  }
}
```

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

---

## ğŸ“„ è®¸å¯è¯

[MIT License](./LICENSE)

---

## ğŸ”— ç›¸å…³é“¾æ¥

- **GitHubä»“åº“**: [LupinLin1/jimeng-web-mcp](https://github.com/LupinLin1/jimeng-web-mcp)
- **npmåŒ…**: [jimeng-web-mcp](https://www.npmjs.com/package/jimeng-web-mcp)
- **å³æ¢¦AIå®˜ç½‘**: [jimeng.jianying.com](https://jimeng.jianying.com)
- **MCPåè®®**: [modelcontextprotocol.io](https://modelcontextprotocol.io)

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªStaræ”¯æŒä¸€ä¸‹ï¼**

Made with â¤ï¸ by [LupinLin1](https://github.com/LupinLin1)

</div>
